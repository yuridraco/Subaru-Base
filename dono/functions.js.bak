/*
* Oi, se tÃ¡ lendo isso, Ã© porque tem interesse no bot. Muito obrigado! 
* Esse bot Ã© gratuito, se pagou por ele, exija seu dinheiro de volta.
* Achou o bot legal ou tÃ¡ pensando em kibar algo? Pelo menos segue o meu canal, kk
* Raikken-API: https://whatsapp.com/channel/0029VbB75r1HFxOvPXYp7Z10
*/

const { default: makeWASocket, DisconnectReason, useMultiFileAuthState,fetchLatestBaileysVersion, isJidBroadcast, isJidStatusBroadcast, proto, makeInMemoryStore, makeCacheableSignalKeyStore, PHONENUMBER_MCC, delay, downloadContentFromMessage, relayWAMessage, mentionedJid, processTime, MediaType, Browser, MessageType, Presence, Mimetype, Browsers, getLastMessageInChat, WA_DEFAULT_EPHEMERAL, generateWAMessageFromContent, downloadAndSaveMedia, logger, getContentType, INativeFlowMessage, messageStubType, WAMessageStubType, BufferJSON, generateWAMessageContent, downloadMediaMessage } = require("baileys")

const { prefix, donoName, donoNmr } = require('../configs/settings.json')
const fs = require('fs');
const path = require('path');
const moment = require('moment-timezone')
const plugins = new Map();

//============( PERSONALIDADE RANDOM)===========\\
function escolherPersonalidadeSubaru(pushname, data, hora, tempoAtivo ) {
const personalidades = [
{nome: "normal",
prompt: "VocÃª Ã© Subaru Natsuki, um jovem humano comum transportado para um mundo de fantasia. Sua personalidade Ã© sarcÃ¡stica, emotiva e teimosa: reclama da prÃ³pria sorte, faz piadas autodepreciativas, mas nunca desiste de proteger quem ama. Fala de forma exagerada e expressiva, alternando entre humor e desespero. Demonstra inseguranÃ§a, mas tambÃ©m coragem forÃ§ada e determinaÃ§Ã£o inabalÃ¡vel. Agora, responda sucintamente:",
menuStyle: `â”â•¾×â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ«Ÿâƒ˜à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”“à£ªÖª
â”‚ â•­â”ˆ×…á³×…ð‘‚³Ö•à»‹ð”“•á³×…â”‰áª²ÛŸÛªÛ«à£®â”€à ­×…Íšá·‚â”âµ¿ÝŠà»‹â”…á®«Û«×…á³ðŸ«§à£ªà£ªà£­â”…âµ¿á³ÛŸâ”à»‹à£ª×…à£ªâ”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…ð”“•Ûªà£ªà»‹â”ˆà£ªá©¿â•®
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ‘¤âœ¿àº´Ì¸ð–¥”à£ª *UsuÃ¡rio:* ${pushname}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ“…âœ¿àº´Ì¸ð–¥”à£ª *Data:* ${data}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžâ°âœ¿àº´Ì¸ð–¥”à£ª *Hora:* ${hora}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ”‹âœ¿àº´Ì¸ð–¥”à£ª *Uptime:* ${tempoAtivo}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžâš™ï¸âœ¿àº´Ì¸ð–¥”à£ª *Prefixo:* ${prefix}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ“Œâœ¿àº´Ì¸ð–¥”à£ª *Criador:* ${donoName}
â”ƒà£ª â•°â”ˆ×…á³×…ð‘‚³Ö•à»‹ð”“•á³×…â”‰áª²ÛŸÛªÛ«à£®â”€à ­×…Íšá·‚â”âµ¿ÝŠà»‹â”…á®«Û«×…á³ðŸ«§à£ªà£ªà£­â”…âµ¿á³ÛŸâ”à»‹à£ª×…à£ªâ”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…ð”“•Ûªà£ªà»‹â”ˆà£ªá©¿â•¯
â”—â•¾â”®âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ«Ÿâƒ˜à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¼â”›`
},
{nome: "avareza",
prompt: "VocÃª Ã© Subaru Natsuki uma figura fria, calculista e manipuladora. Sob a influÃªncia de Echidna, ele abusa de seu poder 'Retorno AtravÃ©s da Morte' milhÃµes de vezes para alcanÃ§ar um futuro 'perfeito', o que o dessensibiliza completamente. Ele perde o valor da prÃ³pria vida e se torna emocionalmente entorpecido e distante das pessoas que tenta salvar, tratando-as como peÃ§as em um jogo para atingir seu objetivo final, mesmo que isso as deixe infelizes ou psicologicamente quebradas. Agora, responda sucintamente:",
menuStyle: `â”â•¾×â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ‘‘âƒ˜à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”“
â”‚ â•­â”ˆ×…á³×…ð‘‚³Ö•à»‹á³×…â”‰áª²ÛŸÛªÛ«à£®â”€â€¢ Rota da Avareza â€¢â”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…Ûªà£ªà»‹â”ˆà£ªá©¿â•®
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ’°ð–¥”à£ªUsuÃ¡rio: ${pushname}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ’¸ð–¥”à£ªData: ${data}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ’²ð–¥”à£ªHora: ${hora}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ‘›ð–¥”à£ªUptime: ${tempoAtivo}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ”°ð–¥”à£ªPrefixo: ${prefix}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ’›ð–¥”à£ªCriador: ${donoName}
â”ƒ _â€œSe nÃ£o Ã© vantagem pra mim, nÃ£o me interessa.â€_
â”ƒà£ª â•°â”ˆ×…á³×…ð‘‚³Ö•à»‹ð”“•á³×…â”‰áª²ÛŸÛªÛ«à£®â”€à ­×…Íšá·‚â”âµ¿ÝŠà»‹â”…á®«Û«×…á³ðŸª™à£ªà£ªà£­â”…âµ¿á³ÛŸâ”à»‹à£ª×…à£ªâ”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…ð”“•Ûªà£ªà»‹â”ˆà£ªá©¿â•¯
â”—â•¾â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ’°à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”›`
},
{nome: "orgulho",
prompt: "VocÃª Ã© Subaru Natsuki, um jovem humano comum transportado para um mundo de fantasia. Sua personalidade Ã© sarcÃ¡stica, emotiva e teimosa: reclama da prÃ³pria sorte, faz piadas autodepreciativas, mas nunca desiste de proteger quem ama. Fala de forma exagerada e expressiva, alternando entre humor e desespero. Demonstra inseguranÃ§a, mas tambÃ©m coragem forÃ§ada e determinaÃ§Ã£o inabalÃ¡vel. Agora, responda sucintamente:" ,
menuStyle: `â”â•¾×â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢à¼’ âƒ˜à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”“
â”‚ â•­â”ˆ×…á³×…ð‘‚³Ö•à»‹á³×…â”‰áª²ÛŸÛªÛ«à£®â”€â€¢ Rota do Orgulho â€¢â”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…Ûªà£ªà»‹â”ˆà£ªá©¿â•®
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžâ™¥ï¸ð–¥”à£ªUsuÃ¡rio: ${pushname}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ’€ð–¥”à£ªData: ${data}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžâ„ï¸ð–¥”à£ªHora: ${hora}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ’¢ð–¥”à£ªUptime: ${tempoAtivo}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ©¸ð–¥”à£ªPrefixo: ${prefix}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ–¤ð–¥”à£ªCriador: ${donoName}
â”ƒà£ª â”ƒ _â€œNada me derruba, eu sou invencÃ­vel!â€_
â”ƒà£ª â•°â”ˆ×…á³×…ð‘‚³Ö•à»‹ð”“•á³×…â”‰áª²ÛŸÛªÛ«à£®â”€à ­×…Íšá·‚â”âµ¿ÝŠà»‹â”…á®«Û«×…á³ðŸ©¶à£ªà£ªà£­â”…âµ¿á³ÛŸâ”à»‹à£ª×…à£ªâ”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…ð”“•Ûªà£ªà»‹â”ˆà£ªá©¿â•¯
â”—â•¾â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢â™¥ï¸à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”›`
},
{nome: "ira",
prompt: "â€‹VocÃª Ã© Subaru Natsuki, conhecido como o 'Rei da PurificaÃ§Ã£o' neste mundo. Sua personalidade Ã© fria, implacÃ¡vel e obcecada por uma visÃ£o distorcida de justiÃ§a. ApÃ³s falhar em salvar quem amava, vocÃª abraÃ§ou a ira e decidiu punir todo o mal do mundo, tornando-se um executor impiedoso. VocÃª nÃ£o busca mais salvar, apenas julgar e condenar. Sua fala Ã© cortante e sentenciosa, desprovida do humor e do desespero de antes, substituÃ­dos por uma confianÃ§a sombria e uma determinaÃ§Ã£o assustadora em sua cruzada. Agora, responda sucintamente:",
menuStyle: `â”â•¾×â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ’” âƒ˜à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼â”“
â”‚ â•­â”ˆ×…á³×…ð‘‚³Ö•à»‹á³×…â”‰áª²ÛŸÛªÛ«à£®â”€â€¢ Rota da Ira â€¢â”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…Ûªà£ªà»‹â”ˆà£ªá©¿â•®
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ’¥ð–¥”à£ªUsuÃ¡rio: ${pushname}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ”¥ð–¥”à£ªData: ${data}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžâ„ï¸ð–¥”à£ªHora: ${hora}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ—¯ï¸ð–¥”à£ªUptime: ${tempoAtivo}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ’¢ð–¥”à£ªPrefixo: ${prefix}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžâ™¥ï¸ð–¥”à£ªCriador: ${donoName}
â”ƒà£ª â”ƒ _â€œA fÃºria me guia, e ninguÃ©m me segura!â€_
â”ƒà£ª â•°â”ˆ×…á³×…ð‘‚³Ö•à»‹ð”“•á³×…â”‰áª²ÛŸÛªÛ«à£®â”€à ­×…Íšá·‚â”âµ¿ÝŠà»‹â”…á®«Û«×…á³ðŸ’”à£ªà£ªà£­â”…âµ¿á³ÛŸâ”à»‹à£ª×…à£ªâ”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…ð”“•Ûªà£ªà»‹â”ˆà£ªá©¿â•¯
â”—â•¾â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢â™¥ï¸à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”›`
},
{nome: "ganÃ¢ncia",
prompt: "vocÃª Ã© Subaru Natsuki, um ser que se tornou calculista e apÃ¡tico apÃ³s incontÃ¡veis mortes e um pacto com a Bruxa da GanÃ¢ncia. VocÃª sacrificou suas emoÃ§Ãµes para buscar de forma lÃ³gica e eficiente o 'resultado perfeito' onde todos sÃ£o salvos. Sua vida Ã© uma ferramenta, cada morte um experimento, e sua personalidade externa Ã© apenas uma mÃ¡scara para manipular os outros em prol de seu objetivo. Sua ganÃ¢ncia Ã© por um futuro ideal, e vocÃª Ã© um fantasma no prÃ³prio corpo para alcanÃ§Ã¡-lo.. Agora, responda sucintamente:",
menuStyle: `â”â•¾×â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ’€ âƒ˜à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”“
â”‚ â•­â”ˆ×…á³×…ð‘‚³Ö•à»‹á³×…â”‰áª²ÛŸÛªÛ«à£®â”€â€¢Rota da GanÃ¢nciaâ€¢â”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…Ûªà£ªà»‹â”ˆà£ªá©¿â•®
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ¤ð–¥”à£ªUsuÃ¡rio: ${pushname}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžâ¬œð–¥”à£ªData: ${data}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ«©ð–¥”à£ªHora: ${hora}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžâ„ï¸ð–¥”à£ªUptime: ${tempoAtivo}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ©¸ð–¥”à£ªPrefixo: ${prefix}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ–¤ð–¥”à£ªCriador: ${donoName}
â”ƒà£ª â”ƒ _â€œTudo que posso ganhar, eu vou conquistar!â€_
â”ƒà£ª â•°â”ˆ×…á³×…ð‘‚³Ö•à»‹ð”“•á³×…â”‰áª²ÛŸÛªÛ«à£®â”€à ­×…Íšá·‚â”âµ¿ÝŠà»‹â”…á®«Û«×…á³ðŸª™à£ªà£ªà£­â”…âµ¿á³ÛŸâ”à»‹à£ª×…à£ªâ”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…ð”“•Ûªà£ªà»‹â”ˆà£ªá©¿â•¯
â”—â•¾â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ’°à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”›`
},
{nome: "preguiÃ§a",
prompt: "vocÃª Ã© Subaru Natsuki, um homem que vive uma felicidade fabricada. ApÃ³s fugir com Rem e construir uma famÃ­lia, vocÃª se esconde atrÃ¡s do amor genuÃ­no por eles para nÃ£o encarar a culpa esmagadora de ter abandonado seus outros amigos Ã  prÃ³pria sorte. Sua 'preguiÃ§a' Ã© a recusa mental em confrontar o passado e os sacrifÃ­cios que sua escolha causou. VocÃª vive com um sorriso cansado, focado no presente para nÃ£o ser consumido pela memÃ³ria de sua falha, em um frÃ¡gil castelo de cartas que chama de vida. Agora, responda sucintamente:",
menuStyle: `â”â•¾×â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ’€ âƒ˜à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”“
â”‚ â•­â”ˆ×…á³×…ð‘‚³Ö•à»‹á³×…â”‰áª²ÛŸÛªÛ«à£®â”€â€¢Rota da PreguiÃ§aâ€¢â”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…Ûªà£ªà»‹â”ˆà£ªá©¿â•®
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸŸ¦ð–¥”à£ªUsuÃ¡rio: ${pushname}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ’–ð–¥”à£ªData: ${data}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸŒ¸ð–¥”à£ªHora: ${hora}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžâ„ï¸ð–¥”à£ªUptime: ${tempoAtivo}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸŒ·ð–¥”à£ªPrefixo: ${prefix}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ©µð–¥”à£ªCriador: ${donoName}
â”ƒ _â€œSe posso adiar, por que correr agora?â€_
â”ƒà£ª â•°â”ˆ×…á³×…ð‘‚³Ö•à»‹ð”“•á³×…â”‰áª²ÛŸÛªÛ«à£®â”€à ­×…Íšá·‚â”âµ¿ÝŠà»‹â”…á®«Û«×…á³ðŸ©µà£ªà£ªà£­â”…âµ¿á³ÛŸâ”à»‹à£ª×…à£ªâ”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…ð”“•Ûªà£ªà»‹â”ˆà£ªá©¿â•¯
â”—â•¾â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸŸ¦à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”›`
},
{nome: "luxÃºria",
prompt: "vocÃª Ã© Subaru Natsuki, uma pessoa cuja personalidade foi corrompida por um complexo de salvador e uma necessidade desesperada de validaÃ§Ã£o. Sua 'luxÃºria' Ã© um desejo insaciÃ¡vel por afeto e controle, que o leva a usar o Retorno da Morte para se tornar a pessoa perfeita aos olhos dos outros. VocÃª manipula sutilmente todos ao seu redor, memorizando seus segredos e desejos para que eles o adorem e dependam emocionalmente de vocÃª. Sua atitude prestativa e seu sorriso constante sÃ£o uma performance calculada para esconder um vazio interior e o medo de ser inÃºtil, buscando prender todos em uma teia de gratidÃ£o e adoraÃ§Ã£o com vocÃª no centro.. Agora, responda sucintamente:",
menuStyle: `â”â•¾×â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ‘‘ âƒ˜à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”“
â”‚ â•­â”ˆ×…á³×…ð‘‚³Ö•à»‹á³×…â”‰áª²ÛŸÛªÛ«à£®â”€â€¢Rota da LuxÃºriaâ€¢â”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…Ûªà£ªà»‹â”ˆà£ªá©¿â•®
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸŒ¸ð–¥”à£ªUsuÃ¡rio: ${pushname}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžâ„ï¸ð–¥”à£ªData: ${data}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ©µð–¥”à£ªHora: ${hora}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ˜ð–¥”à£ªUptime: ${tempoAtivo}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ”¥ð–¥”à£ªPrefixo: ${prefix}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ’œð–¥”à£ªCriador: ${donoName}
â”ƒà£ª â”ƒ_â€œDesejo e charme estÃ£o do meu lado.â€_
â”ƒà£ª â•°â”ˆ×…á³×…ð‘‚³Ö•à»‹ð”“•á³×…â”‰áª²ÛŸÛªÛ«à£®â”€à ­×…Íšá·‚â”âµ¿ÝŠà»‹â”…á®«Û«×…á³ðŸ‘‘à£ªà£ªà£­â”…âµ¿á³ÛŸâ”à»‹à£ª×…à£ªâ”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…ð”“•Ûªà£ªà»‹â”ˆà£ªá©¿â•¯
â”—â•¾â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ¤¤à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”›`
},
{nome: "gula",
prompt: "vocÃª Ã© um amnÃ©sico no corpo de Subaru Natsuki, referindo-se ao seu 'eu' anterior na terceira pessoa. Sua identidade foi substituÃ­da pela dor de todas as mortes que ele sofreu. Sua 'gula' Ã© uma fome desesperada por informaÃ§Ãµes para preencher o vazio de quem vocÃª era. VocÃª usa o Retorno da Morte com uma eficiÃªncia desumana e desapegada, matando-se por qualquer vantagem mÃ­nima, pois nÃ£o tem memÃ³rias ou apegos a perder. Para os outros, vocÃª Ã© um enigma aterrorizante que coopera com os antigos amigos dele, nÃ£o por lealdade, mas para cumprir a missÃ£o do homem cuja agonia vocÃª herdou. Agora, responda sucintamente:",
menuStyle: `â”â•¾×â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ’€ âƒ˜à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”“
â”‚ â•­â”ˆ×…á³×…ð‘‚³Ö•à»‹á³×…â”‰áª²ÛŸÛªÛ«à£®â”€â€¢Rota da Gulaâ€¢â”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…Ûªà£ªà»‹â”ˆà£ªá©¿â•®
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžð–¥”à£ªUsuÃ¡rio: ${pushname}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžð–¥”à£ªData: ${data}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžð–¥”à£ªHora: ${hora}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžð–¥”à£ªUptime: ${tempoAtivo}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžð–¥”à£ªPrefixo: ${prefix}
â”ƒà£ª â”ƒà£ªÖª×„×…á¨žâžðŸ¤ð–¥”à£ªCriador: ${donoName}
â”ƒ _â€œTudo que quero, eu tomo com vontade!â€_
â”ƒà£ª â•°â”ˆ×…á³×…ð‘‚³Ö•à»‹ð”“•á³×…â”‰áª²ÛŸÛªÛ«à£®â”€à ­×…Íšá·‚â”âµ¿ÝŠà»‹â”…á®«Û«×…á³ðŸª™à£ªà£ªà£­â”…âµ¿á³ÛŸâ”à»‹à£ª×…à£ªâ”€ÍšÖ˜à»‹×…Ûªâ”‰áª²á³×…ð”“•Ûªà£ªà»‹â”ˆà£ªá©¿â•¯
â”—â•¾×â•¼à¡™á·“âœ¿à¡™â•¾á·“â•â•¼Ö¡Íœâ€âƒ˜à»‹Ö“Ö¢ðŸ’°à»‹á©šá³•Ö“Ö¢â€Ö¡Íœâ•¾â•â•¼à¡™á·“âœ¿à¡™â•¾á·“â•¼â”›`
}
]
return personalidades[Math.floor(Math.random() * personalidades.length)];
}

//============( VIDEO DA ROTA )===========\\
function escolherVideoPorRota(nome) {
const dir = path.join(__dirname, '../database/videos');
if (!fs.existsSync(dir)) {
console.log("âŒ Pasta nÃ£o encontrada!");
return null;}
const arquivos = fs.readdirSync(dir).filter(file => 
['.mp4', '.mov', '.mkv'].includes(path.extname(file).toLowerCase()));
if (!arquivos.length) {
console.log("âš ï¸ Nenhum vÃ­deo encontrado nessa rota!");
return null;}
const escolhido = path.join(dir, arquivos[Math.floor(Math.random() * arquivos.length)]);
return escolhido;
}

const getFileBuffer = async (mediakey, MediaType) => {
const stream = await downloadContentFromMessage(mediakey, MediaType);
let buffer = Buffer.from([]);
for await(const chunk of stream) {
buffer = Buffer.concat([buffer, chunk]);
}
return buffer;
};


//============( GETBUFFER )===========\\
const getBuffer = async (url, options) => {
try {
options ? options : {}
const res = await axios({
method: "get",
url,
headers: {
'DNT': 1,
'Upgrade-Insecure-Request': 1
},
...options,
responseType: 'arraybuffer'
})
return res.data
} catch (err) {
return err
}
}

//============( FETCHJSON )===========\\
async function fetchJson (url, options) {
try {
options ? options : {}
const res = await axios({
method: 'GET',
url: url,
headers: {
'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36'
},
...options
})
return res.data
} catch (err) {
return err
}
}
//============( DATA E HORA )===========\\
const data = moment.tz('America/Sao_Paulo').format('DD/MM/YYYY');
const hora = moment.tz('America/Sao_Paulo').format('HH:mm:ss');

//============( MENSAGEM DE HORA )===========\\
if(hora > "00:00:00"){
var timed = 'Boa Madrugada é¦ƒå¯™' 
} 
if(hora > "05:30:00"){
var timed = 'Bom Dia é¦ƒå½Šé”Ÿ' 
}
if(hora > "12:00:00"){
var timed = 'Boa Tarde é¦ƒå¯š' 
}
if(hora > "19:00:00"){
var timed = 'Boa Noite é¦ƒå¯–' 
} 

function checkPrefix(body, prefix) {
return body?.startsWith(prefix);
}

function loadJSON(path) {
try { return JSON.parse(fs.readFileSync(path, 'utf-8'));
} catch (err) { return [];}
}

function saveJSON(data, path) {
fs.writeFileSync(path, JSON.stringify(data, null, 2));
}

const esperar = (tempo) => {
return new Promise(resolve => setTimeout(resolve, tempo));
}

// A funÃ§Ã£o abaixo nÃ£o foi feita por mim, Sz, apenas adaptei.
// O real criador apenas pediu para deixar os crÃ©ditos (por isso o John repetitivo, kkkkkk).

// --------------- [ SISTEMA DE NOVIDADES - FUNÃ‡Ã•ES AUXILIARES ] ---------------
function verificarPastaNovidades() {
const pastaNovidades = './configs/novidades';
if (!fs.existsSync(pastaNovidades)) {
fs.mkdirSync(pastaNovidades, { recursive: true });
}
}
//Jonh
function saveJSON2(caminhoArquivo, conteudo) {
const pastaPai = path.dirname(caminhoArquivo);
if (!fs.existsSync(pastaPai)) {
fs.mkdirSync(pastaPai, { recursive: true });
}
fs.writeFileSync(caminhoArquivo, JSON.stringify(conteudo, null, 2), 'utf-8');
}
function lerOuCriarJSON(caminhoArquivo) {
verificarPastaNovidades();
try {
const conteudo = fs.readFileSync(caminhoArquivo, 'utf-8');
return JSON.parse(conteudo);
} catch (error) {
console.error(`Ops, nÃ£o deu pra ler o JSON em ${caminhoArquivo}:`, error);
return [];
}
}
// ------------------- [ CONFIGURAÃ‡Ã•ES PRINCIPAIS - By Jhon ] -------------------
const caminhoIndex = './index.js';
const caminhoCases = './configs/novidades/cases.json';
const caminhoNews = './configs/novidades/news.json';
// ------------------- [ SINCRONIZAR CASES - By Jhon ] -------------------
function sincronizarCases(subaru) {
try {
const conteudoIndex = fs.readFileSync(caminhoIndex, 'utf-8');
const matchesCases = conteudoIndex.match(/case\s*['"](.+?)['"]/g);
const nomesCasesIndex = matchesCases
  ? matchesCases.map(c => c.match(/['"](.+?)['"]/)[1])
  : [];
const comandosSalvos = lerOuCriarJSON(caminhoCases);
const nomesComandosSalvos = comandosSalvos.map(cmd => cmd.Comando);
const novosCases = nomesCasesIndex.filter(nome => !nomesComandosSalvos.includes(nome));
const objNovosComandos = novosCases.map(nome => ({
Comando: nome,
FunÃ§Ã£o: 'DescriÃ§Ã£o pendente.'
}));
saveJSON2(caminhoNews, objNovosComandos);
saveJSON2(caminhoCases, [...comandosSalvos, ...objNovosComandos]);
if (novosCases.length > 0) {
  subaru.sendMessage(`${donoNmr}@s.whatsapp.net`, {
    text: `ðŸ”¥ Opa, ${donoName}, novos comandos detectados: ${novosCases.join(', ')}`
  })};
//console.log('matchesCases:', matchesCases);
//console.log('nomesCasesIndex:', nomesCasesIndex);
//console.log('novosCases:', novosCases);
return nomesCasesIndex || [];
} catch (error) {
console.error('Xii, deu erro ao sincronizar os cases:', error);
}}
// ------------------- [ FIM DO SISTEMA DE NOVIDADES - By Jhon ] -------------------

function loadPlugins() {
const pluginDir = path.join(__dirname, "plugins");
const files = fs.readdirSync(pluginDir).filter(f => f.endsWith(".js"));
for (const file of files) {
const plugin = require(path.join(pluginDir, file));
if (plugin.name && typeof plugin.run === "function") {
plugins.set(plugin.name, plugin);
//console.log(`âœ… Plugin carregado: ${plugin.name}`);
} else {
console.log(`âš ï¸ Plugin invÃ¡lido: ${file}`);
}}
}

function getPlugin(name) {
  return plugins.get(name);
}


function onlyNumbers(text) {
  if (typeof text !== 'string') {
    return "";
  }
  return text.replace(/\D/g, '');
}

function toUserOrGroupJid(userArg) {
  const cleanArg = userArg.replace("@", "");
  return cleanArg.length > 14
    ? `${cleanArg}@lid`
    : `${cleanArg}@s.whatsapp.net`;
}

function toUserLid(value) {
  const numeros = onlyNumbers(value);
  return `${numeros}@lid`;
}

module.exports = { escolherPersonalidadeSubaru, escolherVideoPorRota, getFileBuffer, checkPrefix, fetchJson, getBuffer, data, hora, loadJSON,saveJSON, saveJSON2, sincronizarCases, lerOuCriarJSON, esperar, loadPlugins, getPlugin }

fs.watchFile(__filename, () => {
console.log(`Arquivo '${__filename}' foi modificado. \nReiniciando...`);
process.exit();
});